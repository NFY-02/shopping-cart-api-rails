<% if session[:cart].any? %>
  <h1>Cart</h1>
  <% total_quantity = 0 %>
  <% total_price = 0 %> 
  <% session[:cart].each do |product_id, quantity| %>
    <% product = Product.find(product_id) %>
    <% total_quantity += quantity %>
    <% total_price += product.price * quantity %>
    
    <section class="product">
      <div class="image">
        <%= main_image(product) %>
      </div>
      <div class="summary">
        <h3><%= product.name %></h3>
        <%= turbo_frame_tag "quantity-#{product_id}" do %>
          <p>Quantity: <%= session[:cart][product_id] || 0 %></p>
          <p>Price: <%= number_to_currency(product.price * quantity) %></p>
        <% end %>
<% else %>
  <%= render "cart/cart_empty" %>
<% end %>